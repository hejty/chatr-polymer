<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/firebase-element/firebase-element.html">
<link rel="import" href="bower_components/pvc-globals/pvc-globals.html"/>

<polymer-element name="chatr-questions" attributes="">

  <template>

    <style>
      :host {
        display: block;
      }
    </style>

    <firebase-element id="base" location="https://chatr-polymer.firebaseio.com/questions" data="{{questions}}" keys="{{keys}}"></firebase-element>

    <pvc-globals values="{{globals}}"></pvc-globals>

    <div fit layout vertical>
      <div flex>
        <template repeat="{{key in keys}}">
          <chatr-question question="{{questions[key].question}}" time="{{questions[key].timestamp}}" fullname="{{questions[key].user.fullname}}" liked="{{questions[key].liked}}" disliked="{{questions[key].disliked}}" on-data-change="{{dataChange}}" log></chatr-question>
        </template>
      </div>
      <div>
        <chatr-question-form></chatr-question-form>
      </div>
    </div>

  </template>

  <script>

    (function () {

      Polymer({

        dataChange: function(event) {
          console.log('Data change!')
          console.log('Change: ', event.detail.name, ':', event.detail.value);
        }

      });

    })();

  </script>

</polymer-element>
